<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø±Ø§Ø¯ÛŒÙˆÙ„ÙˆÚ˜ÛŒ Û±Û´Û°Û±</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <style>
        :root {
            --bg-color: #e5e5f7; /* Ø±Ù†Ú¯ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ø±ÙˆØ´Ù† */
            --pattern-color: #444cf7; /* Ø±Ù†Ú¯ Ù†Ù‚Ø§Ø· Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ */
            --card-bg: rgba(255, 255, 255, 0.95);
            --primary: #4f46e5;
            --text-dark: #1e293b;
            --text-light: #64748b;
            --border: #e2e8f0;
            --holiday-bg: #fee2e2;
            --holiday-text: #991b1b;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        body {
            font-family: Tahoma, Arial, sans-serif;
            margin: 0;
            padding: 20px;
            color: var(--text-dark);
            line-height: 1.6;
            
            /* Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ */
            background-color: var(--bg-color);
            background-image: radial-gradient(var(--pattern-color) 0.5px, transparent 0.5px), radial-gradient(var(--pattern-color) 0.5px, var(--bg-color) 0.5px);
            background-size: 20px 20px;
            transition: all 0.3s ease;
        }

        /* Ø­Ø§Ù„Øª Ø´Ø¨ */
        body.dark-mode {
            --bg-color: #0f172a;
            --pattern-color: #334155;
            --card-bg: rgba(30, 41, 59, 0.95);
            --primary: #818cf8;
            --text-dark: #f1f5f9;
            --text-light: #94a3b8;
            --border: #334155;
            --holiday-bg: #450a0a;
            --holiday-text: #fca5a5;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        /* Ù†ÙˆØ§Ø± Ø§Ø¨Ø²Ø§Ø± Ø¨Ø§Ù„Ø§ */
        .toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background: var(--card-bg);
            padding: 10px 15px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            backdrop-filter: blur(5px);
        }

        .btn {
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: 0.2s;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .btn-home { background: #64748b; color: white; }
        .btn-dark { background: #1e293b; color: white; }
        .btn-pdf { background: #ef4444; color: white; }
        .btn:hover { opacity: 0.9; transform: translateY(-2px); }

        /* Ù‡Ø¯Ø± Ø§ØµÙ„ÛŒ */
        .header {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            border: 1px solid var(--border);
            text-align: center;
        }

        h1 { margin: 0; font-size: 1.4rem; color: var(--primary); }
        .subtitle { font-size: 0.9rem; color: var(--text-light); margin-top: 5px; }

        .controls {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        select {
            padding: 8px 15px;
            border-radius: 8px;
            border: 1px solid var(--border);
            font-family: inherit;
            background: var(--bg-color);
            color: var(--text-dark);
            outline: none;
        }

        /* Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            margin-bottom: 20px;
            overflow: hidden;
        }

        .card-header {
            background: rgba(0,0,0,0.03);
            padding: 10px 15px;
            border-bottom: 1px solid var(--border);
            font-weight: bold;
            color: var(--primary);
            font-size: 1rem;
        }

        .table-wrapper {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.8rem;
            white-space: nowrap;
        }

        th, td {
            padding: 10px 8px;
            text-align: center;
            border-bottom: 1px solid var(--border);
            border-left: 1px solid var(--border);
        }
        
        td:last-child, th:last-child { border-left: none; }

        th { 
            background-color: rgba(0,0,0,0.03); 
            color: var(--text-dark); 
            font-weight: bold;
        }
        
        /* Ø³ØªÙˆÙ† ØªØ§Ø±ÛŒØ® */
        td:first-child, th:first-child {
            position: sticky;
            right: 0;
            background-color: var(--card-bg);
            border-left: 2px solid var(--border);
            z-index: 10;
            font-weight: bold;
            min-width: 70px;
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø®Ù„ Ø³Ù„ÙˆÙ„ */
        .station-cell {
            padding: 5px 8px;
            border-radius: 6px;
            font-weight: bold;
            display: inline-block;
            width: 100%;
            box-sizing: border-box;
            font-size: 0.75rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„ ØªØ¹Ø·ÛŒÙ„Ø§Øª */
        .holiday-row td {
            background-color: var(--holiday-bg);
            color: var(--holiday-text);
        }
        .holiday-row td:first-child { background-color: var(--holiday-bg); }

        /* Ø±Ù†Ú¯â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø®Ø´â€ŒÙ‡Ø§ */
        .bg-blue { background: #dbeafe; color: #1e40af; }
        .bg-blue-dark { background: #bfdbfe; color: #172554; }
        .bg-green { background: #dcfce7; color: #166534; }
        .bg-green-dark { background: #bbf7d0; color: #14532d; }
        .bg-yellow { background: #fef9c3; color: #854d0e; }
        .bg-purple { background: #f3e8ff; color: #6b21a8; }
        .bg-red { background: #fee2e2; color: #991b1b; }
        .bg-gray { background: #f3f4f6; color: #1f2937; }
        .bg-off { background: transparent; color: var(--text-light); border: 1px dashed var(--border); }

        .input-group input {
            width: 100%;
            min-width: 100px;
            padding: 6px;
            border: 1px solid var(--border);
            border-radius: 6px;
            text-align: center;
            font-family: inherit;
            background: transparent;
            color: var(--text-dark);
        }
    </style>
</head>
<body>

<div class="container" id="main-content">
    
    <div class="toolbar" data-html2canvas-ignore="true">
        <a href="index.html" class="btn btn-home">
            <i class="fas fa-home"></i> Ø®Ø§Ù†Ù‡
        </a>
        <div style="display: flex; gap: 10px;">
            <button onclick="toggleDarkMode()" class="btn btn-dark">
                <i class="fas fa-moon"></i> Ø´Ø¨/Ø±ÙˆØ²
            </button>
            <button onclick="downloadPDF()" class="btn btn-pdf">
                <i class="fas fa-file-pdf"></i> Ø¯Ø§Ù†Ù„ÙˆØ¯ PDF
            </button>
        </div>
    </div>

    <div class="header">
        <h1>ğŸ“… Ø¨Ø±Ù†Ø§Ù…Ù‡ Ú©Ø§Ø±Ø¢Ù…ÙˆØ²ÛŒ Ø±Ø§Ø¯ÛŒÙˆÙ„ÙˆÚ˜ÛŒ (ÙˆØ±ÙˆØ¯ÛŒ Û±Û´Û°Û±)</h1>
        <div class="subtitle">Ø¨Ù‡ ØªØ±ØªÛŒØ¨ Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ÛŒ Û± ØªØ§ Û¸</div>
        
        <div class="controls" data-html2canvas-ignore="true">
            <span>ÙÛŒÙ„ØªØ± Ú©Ø±Ø¯Ù† Ø¨Ø±Ù†Ø§Ù…Ù‡:</span>
            <select id="groupSelect" onchange="renderSchedule()">
                <option value="all">Ù†Ù…Ø§ÛŒØ´ Ù‡Ù…Ù‡ Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§</option>
                <option value="1">Ú¯Ø±ÙˆÙ‡ Û±</option>
                <option value="2">Ú¯Ø±ÙˆÙ‡ Û²</option>
                <option value="3">Ú¯Ø±ÙˆÙ‡ Û³</option>
                <option value="4">Ú¯Ø±ÙˆÙ‡ Û´</option>
                <option value="5">Ú¯Ø±ÙˆÙ‡ Ûµ</option>
                <option value="6">Ú¯Ø±ÙˆÙ‡ Û¶</option>
                <option value="7">Ú¯Ø±ÙˆÙ‡ Û·</option>
                <option value="8">Ú¯Ø±ÙˆÙ‡ Û¸</option>
            </select>
        </div>
    </div>

    <div id="scheduleContainer">
        </div>

    <div class="card">
        <div class="card-header">
            <span>ğŸ‘¥ Ø§Ø³Ø§Ù…ÛŒ Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒØ§Ù† (Ø¬Ù‡Øª Ø§Ø·Ù„Ø§Ø¹)</span>
        </div>
        <div class="table-wrapper" id="namesTableContainer">
            </div>
    </div>
</div>

<script>
    // --- ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯Ø§Ø±Ú© Ù…ÙˆØ¯ Ùˆ PDF ---

    function toggleDarkMode() {
        document.body.classList.toggle("dark-mode");
        const isDark = document.body.classList.contains("dark-mode");
        localStorage.setItem("theme", isDark ? "dark" : "light");
    }

    // Ø¨Ø±Ø±Ø³ÛŒ Ø­Ø§ÙØ¸Ù‡ Ø¨Ø±Ø§ÛŒ ØªÙ…
    if(localStorage.getItem("theme") === "dark") {
        document.body.classList.add("dark-mode");
    }

    function downloadPDF() {
        const element = document.getElementById('main-content');
        const opt = {
            margin: 0.2,
            filename: 'Radiology_Schedule_1401.pdf',
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2 },
            jsPDF: { unit: 'in', format: 'a4', orientation: 'landscape' }
        };
        html2pdf().set(opt).from(element).save();
    }


    // --- Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ (Ø¯Ø³Øª Ù†Ø®ÙˆØ±Ø¯Ù‡) ---
    const stations = [
        { id: 'mri_bahonar_m', name: 'Ø¨Ø§Ù‡Ù†Ø± ØµØ¨Ø­', css: 'bg-blue' },
        { id: 'mri_bahonar_e', name: 'Ø¨Ø§Ù‡Ù†Ø± Ø¹ØµØ±', css: 'bg-blue-dark' },
        { id: 'mri_shafa_m', name: 'Ø´ÙØ§ ØµØ¨Ø­', css: 'bg-green' },
        { id: 'mri_shafa_e', name: 'Ø´ÙØ§ Ø¹ØµØ±', css: 'bg-green-dark' },
        { id: 'dentistry', name: 'Ø¯Ù†Ø¯Ø§Ù†', css: 'bg-yellow' },
        { id: 'samen', name: 'Ø«Ø§Ù…Ù†', css: 'bg-purple' },
        { id: 'afzali', name: 'Ø§ÙØ¶Ù„ÛŒ', css: 'bg-red' },
        { id: 'ultra', name: 'Ø³ÙˆÙ†Ùˆ', css: 'bg-gray' },
    ];

    const scheduleData = [
        { range: 'Û² ØªØ§ Û¶ Ø§Ø³ÙÙ†Ø¯', days: [
            { d: 'Ø´Ù†Ø¨Ù‡ Û²', a: { mri_bahonar_m: 7, mri_bahonar_e: 2, mri_shafa_m: 3, mri_shafa_e: 4, dentistry: 5, samen: 6, afzali: 1, ultra: 8 } },
            { d: 'ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û³', a: { mri_bahonar_m: 7, mri_bahonar_e: 2, mri_shafa_m: 3, mri_shafa_e: 4, dentistry: 5, samen: 6, afzali: 1, ultra: 8 } },
            { d: 'Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û´', a: { mri_bahonar_m: 7, mri_bahonar_e: 2, mri_shafa_m: 3, mri_shafa_e: 4, dentistry: 5, samen: 6, afzali: 1, ultra: 8 } },
            { d: 'Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ Ûµ', a: { mri_bahonar_m: 7, mri_bahonar_e: 2, mri_shafa_m: 3, mri_shafa_e: 4, dentistry: 5, samen: 6, afzali: 1, ultra: 8 } },
            { d: 'Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡ Û¶', a: { mri_bahonar_m: 7, mri_bahonar_e: 2, mri_shafa_m: 3, mri_shafa_e: 4, dentistry: 5, samen: 6, afzali: 1, ultra: 8 } },
        ]},
        { range: 'Û¹ ØªØ§ Û±Û³ Ø§Ø³ÙÙ†Ø¯', days: [
            { d: 'Ø´Ù†Ø¨Ù‡ Û¹', a: { mri_bahonar_m: 7, mri_bahonar_e: 2, mri_shafa_m: 3, mri_shafa_e: 4, dentistry: 5, samen: 6, afzali: 1, ultra: 8 } },
            { d: 'ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û±Û°', a: { mri_bahonar_m: 7, mri_bahonar_e: 2, mri_shafa_m: 3, mri_shafa_e: 4, dentistry: 5, samen: 6, afzali: 1, ultra: 8 } },
            { d: 'Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û±Û±', a: { mri_bahonar_m: 7, mri_bahonar_e: 2, mri_shafa_m: 3, mri_shafa_e: 4, dentistry: 5, samen: 6, afzali: 1, ultra: 8 } },
            { d: 'Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ Û±Û²', a: { mri_bahonar_m: 2, mri_bahonar_e: 7, mri_shafa_m: 8, mri_shafa_e: 3, dentistry: 4, samen: 5, afzali: 6, ultra: 1 } },
            { d: 'Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡ Û±Û³', a: { mri_bahonar_m: 2, mri_bahonar_e: 7, mri_shafa_m: 8, mri_shafa_e: 3, dentistry: 4, samen: 5, afzali: 6, ultra: 1 } },
        ]},
        { range: 'Û±Û¶ ØªØ§ Û²Û° Ø§Ø³ÙÙ†Ø¯', days: [
            { d: 'Ø´Ù†Ø¨Ù‡ Û±Û¶', a: { mri_bahonar_m: 2, mri_bahonar_e: 7, mri_shafa_m: 8, mri_shafa_e: 3, dentistry: 4, samen: 5, afzali: 6, ultra: 1 } },
            { d: 'ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û±Û·', a: { mri_bahonar_m: 2, mri_bahonar_e: 7, mri_shafa_m: 8, mri_shafa_e: 3, dentistry: 4, samen: 5, afzali: 6, ultra: 1 } },
            { d: 'Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û±Û¸', a: { mri_bahonar_m: 2, mri_bahonar_e: 7, mri_shafa_m: 8, mri_shafa_e: 3, dentistry: 4, samen: 5, afzali: 6, ultra: 1 } },
            { d: 'Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ Û±Û¹', a: { mri_bahonar_m: 2, mri_bahonar_e: 7, mri_shafa_m: 8, mri_shafa_e: 3, dentistry: 4, samen: 5, afzali: 6, ultra: 1 } },
            { d: 'Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡ Û²Û°', holiday: true, a: {} },
        ]},
        { range: 'Û²Û³ Ùˆ Û²Û´ Ø§Ø³ÙÙ†Ø¯', days: [
            { d: 'Ø´Ù†Ø¨Ù‡ Û²Û³', a: { mri_bahonar_m: 2, mri_bahonar_e: 7, mri_shafa_m: 8, mri_shafa_e: 3, dentistry: 4, samen: 5, afzali: 6, ultra: 1 } },
            { d: 'ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û²Û´', a: { mri_bahonar_m: 2, mri_bahonar_e: 7, mri_shafa_m: 8, mri_shafa_e: 3, dentistry: 4, samen: 5, afzali: 6, ultra: 1 } },
        ]},
        { range: 'Û±Ûµ ØªØ§ Û±Û¹ ÙØ±ÙˆØ±Ø¯ÛŒÙ†', days: [
            { d: 'Ø´Ù†Ø¨Ù‡ Û±Ûµ', a: { mri_bahonar_m: 1, mri_bahonar_e: 8, mri_shafa_m: 7, mri_shafa_e: 2, dentistry: 3, samen: 4, afzali: 5, ultra: 6 } },
            { d: 'ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û±Û¶', a: { mri_bahonar_m: 1, mri_bahonar_e: 8, mri_shafa_m: 7, mri_shafa_e: 2, dentistry: 3, samen: 4, afzali: 5, ultra: 6 } },
            { d: 'Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û±Û·', a: { mri_bahonar_m: 1, mri_bahonar_e: 8, mri_shafa_m: 7, mri_shafa_e: 2, dentistry: 3, samen: 4, afzali: 5, ultra: 6 } },
            { d: 'Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ Û±Û¸', a: { mri_bahonar_m: 1, mri_bahonar_e: 8, mri_shafa_m: 7, mri_shafa_e: 2, dentistry: 3, samen: 4, afzali: 5, ultra: 6 } },
            { d: 'Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡ Û±Û¹', a: { mri_bahonar_m: 1, mri_bahonar_e: 8, mri_shafa_m: 7, mri_shafa_e: 2, dentistry: 3, samen: 4, afzali: 5, ultra: 6 } },
        ]},
        { range: 'Û²Û² ØªØ§ Û²Û¶ ÙØ±ÙˆØ±Ø¯ÛŒÙ†', days: [
            { d: 'Ø´Ù†Ø¨Ù‡ Û²Û²', a: { mri_bahonar_m: 1, mri_bahonar_e: 8, mri_shafa_m: 7, mri_shafa_e: 2, dentistry: 3, samen: 4, afzali: 5, ultra: 6 } },
            { d: 'ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û²Û³', a: { mri_bahonar_m: 1, mri_bahonar_e: 8, mri_shafa_m: 7, mri_shafa_e: 2, dentistry: 3, samen: 4, afzali: 5, ultra: 6 } },
            { d: 'Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û²Û´', holiday: true, a: {} },
            { d: 'Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ Û²Ûµ', a: { mri_bahonar_m: 1, mri_bahonar_e: 8, mri_shafa_m: 7, mri_shafa_e: 2, dentistry: 3, samen: 4, afzali: 5, ultra: 6 } },
            { d: 'Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡ Û²Û¶', a: { mri_bahonar_m: 1, mri_bahonar_e: 8, mri_shafa_m: 7, mri_shafa_e: 2, dentistry: 3, samen: 4, afzali: 5, ultra: 6 } },
        ]},
        { range: 'Û²Û¹ ØªØ§ Û³Û± ÙØ±ÙˆØ±Ø¯ÛŒÙ†', days: [
            { d: 'Ø´Ù†Ø¨Ù‡ Û²Û¹', a: { mri_bahonar_m: 8, mri_bahonar_e: 1, mri_shafa_m: 6, mri_shafa_e: 7, dentistry: 2, samen: 3, afzali: 4, ultra: 5 } },
            { d: 'ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û³Û°', a: { mri_bahonar_m: 8, mri_bahonar_e: 1, mri_shafa_m: 6, mri_shafa_e: 7, dentistry: 2, samen: 3, afzali: 4, ultra: 5 } },
            { d: 'Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û³Û±', a: { mri_bahonar_m: 8, mri_bahonar_e: 1, mri_shafa_m: 6, mri_shafa_e: 7, dentistry: 2, samen: 3, afzali: 4, ultra: 5 } },
        ]},
        { range: 'Û± Ùˆ Û² Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª', days: [
            { d: 'Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ Û±', a: { mri_bahonar_m: 8, mri_bahonar_e: 1, mri_shafa_m: 6, mri_shafa_e: 7, dentistry: 2, samen: 3, afzali: 4, ultra: 5 } },
            { d: 'Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡ Û²', a: { mri_bahonar_m: 8, mri_bahonar_e: 1, mri_shafa_m: 6, mri_shafa_e: 7, dentistry: 2, samen: 3, afzali: 4, ultra: 5 } },
        ]},
        { range: 'Ûµ ØªØ§ Û¹ Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª', days: [
            { d: 'Ø´Ù†Ø¨Ù‡ Ûµ', a: { mri_bahonar_m: 8, mri_bahonar_e: 1, mri_shafa_m: 6, mri_shafa_e: 7, dentistry: 2, samen: 3, afzali: 4, ultra: 5 } },
            { d: 'ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û¶', a: { mri_bahonar_m: 8, mri_bahonar_e: 1, mri_shafa_m: 6, mri_shafa_e: 7, dentistry: 2, samen: 3, afzali: 4, ultra: 5 } },
            { d: 'Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û·', a: { mri_bahonar_m: 8, mri_bahonar_e: 1, mri_shafa_m: 6, mri_shafa_e: 7, dentistry: 2, samen: 3, afzali: 4, ultra: 5 } },
            { d: 'Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ Û¸', a: { mri_bahonar_m: 8, mri_bahonar_e: 1, mri_shafa_m: 6, mri_shafa_e: 7, dentistry: 2, samen: 3, afzali: 4, ultra: 5 } },
            { d: 'Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡ Û¹', a: { mri_bahonar_m: 8, mri_bahonar_e: 1, mri_shafa_m: 6, mri_shafa_e: 7, dentistry: 2, samen: 3, afzali: 4, ultra: 5 } },
        ]},
        { range: 'Û±Û² ØªØ§ Û±Û¶ Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª', days: [
            { d: 'Ø´Ù†Ø¨Ù‡ Û±Û²', a: { mri_bahonar_m: 5, mri_bahonar_e: 6, mri_shafa_m: 1, mri_shafa_e: 8, dentistry: 7, samen: 2, afzali: 3, ultra: 4 } },
            { d: 'ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û±Û³', a: { mri_bahonar_m: 5, mri_bahonar_e: 6, mri_shafa_m: 1, mri_shafa_e: 8, dentistry: 7, samen: 2, afzali: 3, ultra: 4 } },
            { d: 'Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û±Û´', a: { mri_bahonar_m: 5, mri_bahonar_e: 6, mri_shafa_m: 1, mri_shafa_e: 8, dentistry: 7, samen: 2, afzali: 3, ultra: 4 } },
            { d: 'Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ Û±Ûµ', a: { mri_bahonar_m: 5, mri_bahonar_e: 6, mri_shafa_m: 1, mri_shafa_e: 8, dentistry: 7, samen: 2, afzali: 3, ultra: 4 } },
            { d: 'Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡ Û±Û¶', a: { mri_bahonar_m: 5, mri_bahonar_e: 6, mri_shafa_m: 1, mri_shafa_e: 8, dentistry: 7, samen: 2, afzali: 3, ultra: 4 } },
        ]},
        { range: 'Û±Û¹ ØªØ§ Û²Û³ Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª', days: [
            { d: 'Ø´Ù†Ø¨Ù‡ Û±Û¹', a: { mri_bahonar_m: 5, mri_bahonar_e: 6, mri_shafa_m: 1, mri_shafa_e: 8, dentistry: 7, samen: 2, afzali: 3, ultra: 4 } },
            { d: 'ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û²Û°', a: { mri_bahonar_m: 5, mri_bahonar_e: 6, mri_shafa_m: 1, mri_shafa_e: 8, dentistry: 7, samen: 2, afzali: 3, ultra: 4 } },
            { d: 'Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û²Û±', a: { mri_bahonar_m: 5, mri_bahonar_e: 6, mri_shafa_m: 1, mri_shafa_e: 8, dentistry: 7, samen: 2, afzali: 3, ultra: 4 } },
            { d: 'Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ Û²Û²', a: { mri_bahonar_m: 5, mri_bahonar_e: 6, mri_shafa_m: 1, mri_shafa_e: 8, dentistry: 7, samen: 2, afzali: 3, ultra: 4 } },
            { d: 'Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡ Û²Û³', a: { mri_bahonar_m: 5, mri_bahonar_e: 6, mri_shafa_m: 1, mri_shafa_e: 8, dentistry: 7, samen: 2, afzali: 3, ultra: 4 } },
        ]},
        { range: 'Û²Û¶ ØªØ§ Û³Û° Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª', days: [
            { d: 'Ø´Ù†Ø¨Ù‡ Û²Û¶', a: { mri_bahonar_m: 6, mri_bahonar_e: 5, mri_shafa_m: 4, mri_shafa_e: 1, dentistry: 8, samen: 7, afzali: 2, ultra: 3 } },
            { d: 'ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û²Û·', a: { mri_bahonar_m: 6, mri_bahonar_e: 5, mri_shafa_m: 4, mri_shafa_e: 1, dentistry: 8, samen: 7, afzali: 2, ultra: 3 } },
            { d: 'Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û²Û¸', a: { mri_bahonar_m: 6, mri_bahonar_e: 5, mri_shafa_m: 4, mri_shafa_e: 1, dentistry: 8, samen: 7, afzali: 2, ultra: 3 } },
            { d: 'Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ Û²Û¹', a: { mri_bahonar_m: 6, mri_bahonar_e: 5, mri_shafa_m: 4, mri_shafa_e: 1, dentistry: 8, samen: 7, afzali: 2, ultra: 3 } },
            { d: 'Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡ Û³Û°', a: { mri_bahonar_m: 6, mri_bahonar_e: 5, mri_shafa_m: 4, mri_shafa_e: 1, dentistry: 8, samen: 7, afzali: 2, ultra: 3 } },
        ]},
        { range: 'Û² ØªØ§ Û¶ Ø®Ø±Ø¯Ø§Ø¯', days: [
            { d: 'Ø´Ù†Ø¨Ù‡ Û²', a: { mri_bahonar_m: 6, mri_bahonar_e: 5, mri_shafa_m: 4, mri_shafa_e: 1, dentistry: 8, samen: 7, afzali: 2, ultra: 3 } },
            { d: 'ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û³', a: { mri_bahonar_m: 6, mri_bahonar_e: 5, mri_shafa_m: 4, mri_shafa_e: 1, dentistry: 8, samen: 7, afzali: 2, ultra: 3 } },
            { d: 'Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û´', a: { mri_bahonar_m: 6, mri_bahonar_e: 5, mri_shafa_m: 4, mri_shafa_e: 1, dentistry: 8, samen: 7, afzali: 2, ultra: 3 } },
            { d: 'Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ Ûµ', holiday: true, a: {} },
            { d: 'Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡ Û¶', holiday: true, a: {} },
        ]},
        { range: 'Û¹ ØªØ§ Û±Û³ Ø®Ø±Ø¯Ø§Ø¯', days: [
            { d: 'Ø´Ù†Ø¨Ù‡ Û¹', a: { mri_bahonar_m: 3, mri_bahonar_e: 4, mri_shafa_m: 5, mri_shafa_e: 6, dentistry: 1, samen: 8, afzali: 7, ultra: 2 } },
            { d: 'ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û±Û°', a: { mri_bahonar_m: 3, mri_bahonar_e: 4, mri_shafa_m: 5, mri_shafa_e: 6, dentistry: 1, samen: 8, afzali: 7, ultra: 2 } },
            { d: 'Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û±Û±', a: { mri_bahonar_m: 3, mri_bahonar_e: 4, mri_shafa_m: 5, mri_shafa_e: 6, dentistry: 1, samen: 8, afzali: 7, ultra: 2 } },
            { d: 'Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ Û±Û²', a: { mri_bahonar_m: 3, mri_bahonar_e: 4, mri_shafa_m: 5, mri_shafa_e: 6, dentistry: 1, samen: 8, afzali: 7, ultra: 2 } },
            { d: 'Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡ Û±Û³', a: { mri_bahonar_m: 3, mri_bahonar_e: 4, mri_shafa_m: 5, mri_shafa_e: 6, dentistry: 1, samen: 8, afzali: 7, ultra: 2 } },
        ]},
        { range: 'Û±Û¶ ØªØ§ Û²Û° Ø®Ø±Ø¯Ø§Ø¯', days: [
            { d: 'Ø´Ù†Ø¨Ù‡ Û±Û¶', a: { mri_bahonar_m: 3, mri_bahonar_e: 4, mri_shafa_m: 5, mri_shafa_e: 6, dentistry: 1, samen: 8, afzali: 7, ultra: 2 } },
            { d: 'ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û±Û·', a: { mri_bahonar_m: 3, mri_bahonar_e: 4, mri_shafa_m: 5, mri_shafa_e: 6, dentistry: 1, samen: 8, afzali: 7, ultra: 2 } },
            { d: 'Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û±Û¸', a: { mri_bahonar_m: 3, mri_bahonar_e: 4, mri_shafa_m: 5, mri_shafa_e: 6, dentistry: 1, samen: 8, afzali: 7, ultra: 2 } },
            { d: 'Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ Û±Û¹', a: { mri_bahonar_m: 3, mri_bahonar_e: 4, mri_shafa_m: 5, mri_shafa_e: 6, dentistry: 1, samen: 8, afzali: 7, ultra: 2 } },
            { d: 'Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡ Û²Û°', a: { mri_bahonar_m: 3, mri_bahonar_e: 4, mri_shafa_m: 5, mri_shafa_e: 6, dentistry: 1, samen: 8, afzali: 7, ultra: 2 } },
        ]},
        { range: 'Û²Û³ ØªØ§ Û²Û· Ø®Ø±Ø¯Ø§Ø¯', days: [
            { d: 'Ø´Ù†Ø¨Ù‡ Û²Û³', a: { mri_bahonar_m: 4, mri_bahonar_e: 3, mri_shafa_m: 2, mri_shafa_e: 5, dentistry: 6, samen: 1, afzali: 8, ultra: 7 } },
            { d: 'ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û²Û´', a: { mri_bahonar_m: 4, mri_bahonar_e: 3, mri_shafa_m: 2, mri_shafa_e: 5, dentistry: 6, samen: 1, afzali: 8, ultra: 7 } },
            { d: 'Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û²Ûµ', a: { mri_bahonar_m: 4, mri_bahonar_e: 3, mri_shafa_m: 2, mri_shafa_e: 5, dentistry: 6, samen: 1, afzali: 8, ultra: 7 } },
            { d: 'Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ Û²Û¶', a: { mri_bahonar_m: 4, mri_bahonar_e: 3, mri_shafa_m: 2, mri_shafa_e: 5, dentistry: 6, samen: 1, afzali: 8, ultra: 7 } },
            { d: 'Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡ Û²Û·', a: { mri_bahonar_m: 4, mri_bahonar_e: 3, mri_shafa_m: 2, mri_shafa_e: 5, dentistry: 6, samen: 1, afzali: 8, ultra: 7 } },
        ]},
        { range: 'Û³Û° Ùˆ Û³Û± Ø®Ø±Ø¯Ø§Ø¯', days: [
            { d: 'Ø´Ù†Ø¨Ù‡ Û³Û°', a: { mri_bahonar_m: 4, mri_bahonar_e: 3, mri_shafa_m: 2, mri_shafa_e: 5, dentistry: 6, samen: 1, afzali: 8, ultra: 7 } },
            { d: 'ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û³Û±', a: { mri_bahonar_m: 4, mri_bahonar_e: 3, mri_shafa_m: 2, mri_shafa_e: 5, dentistry: 6, samen: 1, afzali: 8, ultra: 7 } },
        ]},
        { range: 'Û± ØªØ§ Û³ ØªÛŒØ±', days: [
            { d: 'Ø¯ÙˆØ´Ù†Ø¨Ù‡ Û±', a: { mri_bahonar_m: 4, mri_bahonar_e: 3, mri_shafa_m: 2, mri_shafa_e: 5, dentistry: 6, samen: 1, afzali: 8, ultra: 7 } },
            { d: 'Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ Û²', a: { mri_bahonar_m: 4, mri_bahonar_e: 3, mri_shafa_m: 2, mri_shafa_e: 5, dentistry: 6, samen: 1, afzali: 8, ultra: 7 } },
            { d: 'Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡ Û³', a: { mri_bahonar_m: 4, mri_bahonar_e: 3, mri_shafa_m: 2, mri_shafa_e: 5, dentistry: 6, samen: 1, afzali: 8, ultra: 7 } },
        ]},
    ];

    function findStationForGroup(dayAssignments, groupNum) {
        if (!dayAssignments) return null;
        const stationId = Object.keys(dayAssignments).find(key => dayAssignments[key] == groupNum);
        return stations.find(s => s.id === stationId);
    }

    function renderSchedule() {
        const selectedGroup = document.getElementById('groupSelect').value;
        const container = document.getElementById('scheduleContainer');
        container.innerHTML = '';

        scheduleData.forEach(week => {
            const card = document.createElement('div');
            card.className = 'card';
            
            let tableHeader = '';
            
            if (selectedGroup === 'all') {
                tableHeader = `
                    <th style="min-width:40px">Ú¯ Û±</th>
                    <th style="min-width:40px">Ú¯ Û²</th>
                    <th style="min-width:40px">Ú¯ Û³</th>
                    <th style="min-width:40px">Ú¯ Û´</th>
                    <th style="min-width:40px">Ú¯ Ûµ</th>
                    <th style="min-width:40px">Ú¯ Û¶</th>
                    <th style="min-width:40px">Ú¯ Û·</th>
                    <th style="min-width:40px">Ú¯ Û¸</th>
                `;
            } else {
                tableHeader = `<th>Ù…Ø­Ù„ Ú©Ø§Ø±Ø¢Ù…ÙˆØ²ÛŒ Ú¯Ø±ÙˆÙ‡ ${selectedGroup}</th>`;
            }

            let tableRows = '';
            week.days.forEach(day => {
                let rowContent = '';
                
                if (day.holiday) {
                    const colSpan = selectedGroup === 'all' ? 8 : 1;
                    rowContent = `<td colspan="${colSpan}">â›” ØªØ¹Ø·ÛŒÙ„</td>`;
                    tableRows += `
                        <tr class="holiday-row">
                            <td style="font-weight:bold; min-width:60px;">${day.d}</td>
                            ${rowContent}
                        </tr>
                    `;
                } else {
                    if (selectedGroup === 'all') {
                        for (let g = 1; g <= 8; g++) {
                            const station = findStationForGroup(day.a, g);
                            if (station) {
                                rowContent += `<td><span class="station-cell ${station.css}">${station.name}</span></td>`;
                            } else {
                                rowContent += `<td><span class="station-cell bg-off">-</span></td>`;
                            }
                        }
                    } else {
                        const myStation = findStationForGroup(day.a, selectedGroup);
                        if (myStation) {
                            rowContent = `<td><span class="station-cell ${myStation.css}" style="font-size:0.9rem; padding:8px;">${myStation.name}</span></td>`;
                        } else {
                            rowContent = `<td><span style="color:var(--text-light)">Ø¢Ù / ØªØ¹Ø·ÛŒÙ„</span></td>`;
                        }
                    }

                    tableRows += `
                        <tr>
                            <td style="font-weight:bold; min-width:60px;">${day.d}</td>
                            ${rowContent}
                        </tr>
                    `;
                }
            });

            card.innerHTML = `
                <div class="card-header">${week.range}</div>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Ø±ÙˆØ²</th>
                                ${tableHeader}
                            </tr>
                        </thead>
                        <tbody>
                            ${tableRows}
                        </tbody>
                    </table>
                </div>
            `;
            container.appendChild(card);
        });
    }

    // --- Ø¨Ø®Ø´ Ø§Ø³Ø§Ù…ÛŒ ---
    
    const hardcodedGroups = [
        { id: 1, label: 'Ú¯Ø±ÙˆÙ‡ Û±', members: ['Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ Ù…Ø±ÙˆÛŒ', 'Ø§Ù…ÛŒØ±Ø­Ø³ÛŒÙ† Ù…ÙˆØ³ÛŒ Ù¾ÙˆØ±', 'Ø±Ø²ÛŒØªØ§ Ø³Ø±Ø§ÙˆØ§Ù†ÛŒ'] },
        { id: 2, label: 'Ú¯Ø±ÙˆÙ‡ Û²', members: ['ÙØ§Ø·Ù…Ù‡ Ø¹Ø¨Ø§Ø³ÛŒ', 'Ø¢Ø°ÛŒÙ† Ø¨Ù‡Ø±Ø§Ù…ÛŒ', 'Ø²Ù‡Ø±Ø§ Ø´Ø±ÙØ¹Ù„ÛŒ Ù¾ÙˆØ±'] },
        { id: 3, label: 'Ú¯Ø±ÙˆÙ‡ Û³', members: ['Ø§Ù…ÛŒØ±Ø­Ø³ÛŒÙ† Ø®Ù„ÛŒÙ„ ÛŒØ²Ø¯ÛŒ', 'Ú©ÙˆØ«Ø± Ú¯Ù„Ø³ØªØ§Ù†ÛŒ', 'ÙØ§Ø¯ÛŒØ§ Ø®Ø§Ù„Ù‚ÛŒ'] },
        { id: 4, label: 'Ú¯Ø±ÙˆÙ‡ Û´', members: ['Ú©ÛŒØ§Ù†Ø§ Ø¬ÙˆØ§Ø¯ÛŒ', 'Ù†ÛŒÙ„ÙˆÙØ± Ø­ØµÛŒØ¨ÛŒ', 'Ù…Ø­Ù…Ø¯ Ù…Ù‡Ø¯ÛŒ Ø¨Ù‡Ø²Ø§Ø¯ÛŒ'] },
        { id: 5, label: 'Ú¯Ø±ÙˆÙ‡ Ûµ', members: ['Ú©ÛŒÙ…ÛŒØ§ Ø¹Ø³Ú©Ø±ÛŒ', 'Ù†Ø±Ø¬Ø³ Ø§Ù†Ø§Ø±ÛŒ', 'Ù…ÛŒØªØ±Ø§ Ù†Ø¬ÙÛŒ'] },
        { id: 6, label: 'Ú¯Ø±ÙˆÙ‡ Û¶', members: ['Ù†Ø¬Ù…Ù‡ Ø­Ø³ÛŒÙ†ÛŒ', 'Ø­Ø³ÛŒÙ† Ú©Ø§Ù‡Ù†ÛŒ', 'ÙØ§Ø·Ù…Ù‡ Ù‡Ø§Ø´Ù…ÛŒ'] },
        { id: 7, label: 'Ú¯Ø±ÙˆÙ‡ Û·', members: ['Ù…Ø­Ù…Ø¯Ù…Ù‡Ø¯ÛŒ Ø­ÛŒØ¯Ø±ÛŒ', 'Ø¹Ù„ÛŒ Ø³Ù„ÛŒÙ…Ø§Ù†ÛŒ', ''] },
        { id: 8, label: 'Ú¯Ø±ÙˆÙ‡ Û¸', members: ['Ø¹Ù„ÛŒØ±Ø¶Ø§ Ø¯Ú˜Ø§Ù†Ú©Ø§Ù‡', 'Ø¹Ù„ÛŒ Ø¹Ø¨Ø§Ø³ÛŒ', ''] },
    ];

    const STORAGE_KEY = 'radiologyGroups_final_v1';
    let studentGroups = JSON.parse(localStorage.getItem(STORAGE_KEY)) || hardcodedGroups;

    function renderNamesTable() {
        const container = document.getElementById('namesTableContainer');
        let html = `<table><thead><tr><th style="width:60px">Ø±Ø¯ÛŒÙ</th>`;
        
        studentGroups.forEach(g => {
            html += `<th style="min-width:90px">${g.label}</th>`;
        });
        html += `</tr></thead><tbody>`;

        [0, 1, 2].forEach(idx => {
            html += `<tr><td>Ù†ÙØ± ${idx === 0 ? 'Ø§ÙˆÙ„' : idx === 1 ? 'Ø¯ÙˆÙ…' : 'Ø³ÙˆÙ…'}</td>`;
            studentGroups.forEach(g => {
                html += `<td class="input-group">
                    <input type="text" 
                           value="${g.members[idx]}" 
                           oninput="updateMember(${g.id}, ${idx}, this.value)" 
                           placeholder="...">
                </td>`;
            });
            html += `</tr>`;
        });
        
        html += `</tbody></table>`;
        container.innerHTML = html;
    }

    window.updateMember = function(groupId, memberIndex, value) {
        const group = studentGroups.find(g => g.id === groupId);
        if (group) {
            group.members[memberIndex] = value;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(studentGroups));
        }
    };

    renderSchedule();
    renderNamesTable();

</script>

</body>
</html>
