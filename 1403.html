<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ú©Ø§Ø±Ø¢Ù…ÙˆØ²ÛŒ Û² Ø±Ø§Ø¯ÛŒÙˆÙ„ÙˆÚ˜ÛŒ (Û±Û´Û°Û³)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <style>
        :root {
            --bg-color: #faf5ff; /* Ø¨Ù†ÙØ´ Ø®ÛŒÙ„ÛŒ Ø±ÙˆØ´Ù† */
            --pattern-color: #a855f7; /* Ø±Ù†Ú¯ Ù†Ù‚Ø§Ø· Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ */
            --card-bg: rgba(255, 255, 255, 0.95);
            --primary: #7e22ce; /* Ø±Ù†Ú¯ Ø§ØµÙ„ÛŒ: Ø¨Ù†ÙØ´ ØªÛŒØ±Ù‡ */
            --text-dark: #1e293b;
            --text-light: #64748b;
            --border: #f3e8ff;
            --shadow: 0 4px 6px -1px rgba(126, 34, 206, 0.1), 0 2px 4px -1px rgba(126, 34, 206, 0.06);
        }

        body {
            font-family: Tahoma, Arial, sans-serif;
            margin: 0;
            padding: 20px;
            color: var(--text-dark);
            line-height: 1.6;
            
            /* Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ */
            background-color: var(--bg-color);
            background-image: radial-gradient(var(--pattern-color) 0.5px, transparent 0.5px), radial-gradient(var(--pattern-color) 0.5px, var(--bg-color) 0.5px);
            background-size: 20px 20px;
            transition: all 0.3s ease;
        }

        /* Ø­Ø§Ù„Øª Ø´Ø¨ */
        body.dark-mode {
            --bg-color: #0f172a;
            --pattern-color: #9333ea;
            --card-bg: rgba(30, 41, 59, 0.95);
            --primary: #c084fc;
            --text-dark: #f1f5f9;
            --text-light: #94a3b8;
            --border: #334155;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        /* Ù†ÙˆØ§Ø± Ø§Ø¨Ø²Ø§Ø± Ø¨Ø§Ù„Ø§ */
        .toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background: var(--card-bg);
            padding: 10px 15px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            backdrop-filter: blur(5px);
        }

        .btn {
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: 0.2s;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .btn-home { background: #64748b; color: white; }
        .btn-dark { background: #1e293b; color: white; }
        .btn-pdf { background: #ef4444; color: white; }
        .btn:hover { opacity: 0.9; transform: translateY(-2px); }

        /* Ù‡Ø¯Ø± Ø§ØµÙ„ÛŒ */
        .header {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            border: 1px solid var(--border);
            text-align: center;
        }

        h1 { margin: 0; font-size: 1.4rem; color: var(--primary); }
        .subtitle { font-size: 0.9rem; color: var(--text-light); margin-top: 5px; }

        .controls {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        select {
            padding: 8px 15px;
            border-radius: 8px;
            border: 1px solid var(--border);
            font-family: inherit;
            background: var(--bg-color);
            color: var(--text-dark);
            outline: none;
            font-weight: bold;
        }

        /* Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            margin-bottom: 20px;
            overflow: hidden;
        }

        .card-header {
            background: rgba(126, 34, 206, 0.05); /* Ù‡Ø§Ù„Ù‡ Ø¨Ù†ÙØ´ */
            padding: 10px 15px;
            border-bottom: 1px solid var(--border);
            font-weight: bold;
            color: var(--primary);
            font-size: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-wrapper {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.8rem;
            white-space: nowrap;
        }

        th, td {
            padding: 10px 8px;
            text-align: center;
            border-bottom: 1px solid var(--border);
            border-left: 1px solid var(--border);
        }
        
        td:last-child, th:last-child { border-left: none; }

        th { 
            background-color: rgba(126, 34, 206, 0.05); 
            color: var(--text-dark); 
            font-weight: bold;
        }
        
        /* Ø³ØªÙˆÙ† ØªØ§Ø±ÛŒØ® */
        td:first-child, th:first-child {
            position: sticky;
            right: 0;
            background-color: var(--card-bg);
            border-left: 2px solid var(--border);
            z-index: 10;
            font-weight: bold;
            min-width: 80px;
            color: var(--text-dark);
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø®Ù„ Ø³Ù„ÙˆÙ„ */
        .station-cell {
            padding: 6px 8px;
            border-radius: 6px;
            font-weight: bold;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            box-sizing: border-box;
            font-size: 0.8rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        
        .instructor-name {
            font-size: 0.7rem;
            font-weight: normal;
            opacity: 0.85;
            margin-top: 2px;
        }

        /* Ø±Ù†Ú¯â€ŒØ¨Ù†Ø¯ÛŒ Ø¨ÛŒÙ…Ø§Ø±Ø³ØªØ§Ù†â€ŒÙ‡Ø§ */
        .bg-afzali { background: #fee2e2; color: #991b1b; border: 1px solid #fecaca; } /* Ù‚Ø±Ù…Ø² */
        .bg-bahonar { background: #dbeafe; color: #1e40af; border: 1px solid #bfdbfe; } /* Ø¢Ø¨ÛŒ */
        .bg-shafa { background: #dcfce7; color: #166534; border: 1px solid #bbf7d0; } /* Ø³Ø¨Ø² */
        .bg-off { background: rgba(0,0,0,0.05); color: var(--text-light); border: 1px dashed var(--border); }

        .input-group input {
            width: 100%;
            min-width: 100px;
            padding: 6px;
            border: 1px solid var(--border);
            border-radius: 6px;
            text-align: center;
            font-family: inherit;
            background: transparent;
            color: var(--text-dark);
        }
    </style>
</head>
<body>

<div class="container" id="main-content">
    
    <div class="toolbar" data-html2canvas-ignore="true">
        <a href="index.html" class="btn btn-home">
            <i class="fas fa-home"></i> Ø®Ø§Ù†Ù‡
        </a>
        <div style="display: flex; gap: 10px;">
            <button onclick="toggleDarkMode()" class="btn btn-dark">
                <i class="fas fa-moon"></i> Ø´Ø¨/Ø±ÙˆØ²
            </button>
            <button onclick="downloadPDF()" class="btn btn-pdf">
                <i class="fas fa-file-pdf"></i> Ø¯Ø§Ù†Ù„ÙˆØ¯ PDF
            </button>
        </div>
    </div>

    <div class="header">
        <h1>ğŸ“… Ø¨Ø±Ù†Ø§Ù…Ù‡ Ú©Ø§Ø±Ø¢Ù…ÙˆØ²ÛŒ Û² Ø±Ø§Ø¯ÛŒÙˆÙ„ÙˆÚ˜ÛŒ (Û±Û´Û°Û³)</h1>
        <div class="subtitle">ÛŒÚ©Ø´Ù†Ø¨Ù‡â€ŒÙ‡Ø§ (ØµØ¨Ø­ Ùˆ Ø¹ØµØ±) | Ù†ÛŒÙ…Ø³Ø§Ù„ Ø¯ÙˆÙ… Û±Û´Û°Ûµ-Û±Û´Û°Û´</div>
        
        <div class="controls" data-html2canvas-ignore="true">
            <span>ÙÛŒÙ„ØªØ± Ú¯Ø±ÙˆÙ‡:</span>
            <select id="groupSelect" onchange="renderSchedule()">
                <option value="all">Ù†Ù…Ø§ÛŒØ´ Ù‡Ù…Ù‡ Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§</option>
                <option value="1">Ú¯Ø±ÙˆÙ‡ Û±</option>
                <option value="2">Ú¯Ø±ÙˆÙ‡ Û²</option>
                <option value="3">Ú¯Ø±ÙˆÙ‡ Û³</option>
                <option value="4">Ú¯Ø±ÙˆÙ‡ Û´</option>
                <option value="5">Ú¯Ø±ÙˆÙ‡ Ûµ</option>
                <option value="6">Ú¯Ø±ÙˆÙ‡ Û¶</option>
            </select>
        </div>
    </div>

    <div id="scheduleContainer">
        </div>

    <div class="card">
        <div class="card-header">
            <span>ğŸ‘©â€âš•ï¸ Ù„ÛŒØ³Øª Ù…Ø±Ø¨ÛŒØ§Ù† Ùˆ Ø§Ø³Ø§ØªÛŒØ¯</span>
        </div>
        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th>Ø¨ÛŒÙ…Ø§Ø±Ø³ØªØ§Ù†</th>
                        <th>ÛŒÚ©Ø´Ù†Ø¨Ù‡ ØµØ¨Ø­</th>
                        <th>ÛŒÚ©Ø´Ù†Ø¨Ù‡ Ø¹ØµØ±</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="bg-afzali">Ø§ÙØ¶Ù„ÛŒ Ù¾ÙˆØ±</td>
                        <td>Ø®Ø§Ù†Ù… Ø³ÙˆØ¯Ù‡ Ù†Ø§Ø¯Ø±ÛŒ</td>
                        <td>Ø®Ø§Ù†Ù… Ø­Ø¯ÛŒØ«Ù‡ Ø²Ù†Ú¯ÛŒ Ø¢Ø¨Ø§Ø¯ÛŒ</td>
                    </tr>
                    <tr>
                        <td class="bg-bahonar">Ø¨Ø§Ù‡Ù†Ø±</td>
                        <td>Ø¯Ú©ØªØ± Ø­Ø¯ÛŒØ«Ù‡ Ø¹Ù„ÛŒÙ…Ø±Ø§Ø¯ÛŒ</td>
                        <td>Ø¢Ù‚Ø§ÛŒ Ø¹Ù„ÛŒ Ø¶ÛŒØºÙ…ÛŒ</td>
                    </tr>
                    <tr>
                        <td class="bg-shafa">Ø´ÙØ§</td>
                        <td>Ø®Ø§Ù†Ù… Ù…Ø±ÛŒÙ… Ø³Ø§Ù„Ø§Ø±ÛŒ</td>
                        <td>Ø¢Ù‚Ø§ÛŒ Ø±Ø³ÙˆÙ„ Ø¯Ù‡Ù‚Ø§Ù†ÛŒ Ø³Ù„Ø·Ø§Ù†ÛŒ</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <span>ğŸ‘¥ Ø§Ø³Ø§Ù…ÛŒ Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒØ§Ù† (Ø°Ø®ÛŒØ±Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø±)</span>
        </div>
        <div class="table-wrapper" id="namesTableContainer">
            </div>
    </div>
</div>

<script>
    // --- ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯Ø§Ø±Ú© Ù…ÙˆØ¯ Ùˆ PDF ---
    function toggleDarkMode() {
        document.body.classList.toggle("dark-mode");
        const isDark = document.body.classList.contains("dark-mode");
        localStorage.setItem("theme", isDark ? "dark" : "light");
    }

    if(localStorage.getItem("theme") === "dark") {
        document.body.classList.add("dark-mode");
    }

    function downloadPDF() {
        const element = document.getElementById('main-content');
        const opt = {
            margin: 0.2,
            filename: 'Radiology_Internship2_1403.pdf',
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2 },
            jsPDF: { unit: 'in', format: 'a4', orientation: 'landscape' }
        };
        html2pdf().set(opt).from(element).save();
    }

    // --- Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ ---
    
    const stations = {
        'afzali_m': { name: 'Ø§ÙØ¶Ù„ÛŒ ØµØ¨Ø­', css: 'bg-afzali', instructor: 'Ø®Ø§Ù†Ù… Ù†Ø§Ø¯Ø±ÛŒ' },
        'afzali_e': { name: 'Ø§ÙØ¶Ù„ÛŒ Ø¹ØµØ±', css: 'bg-afzali', instructor: 'Ø®Ø§Ù†Ù… Ø²Ù†Ú¯ÛŒ Ø¢Ø¨Ø§Ø¯ÛŒ' },
        'bahonar_m': { name: 'Ø¨Ø§Ù‡Ù†Ø± ØµØ¨Ø­', css: 'bg-bahonar', instructor: 'Ø¯Ú©ØªØ± Ø¹Ù„ÛŒÙ…Ø±Ø§Ø¯ÛŒ' },
        'bahonar_e': { name: 'Ø¨Ø§Ù‡Ù†Ø± Ø¹ØµØ±', css: 'bg-bahonar', instructor: 'Ø¢Ù‚Ø§ÛŒ Ø¶ÛŒØºÙ…ÛŒ' },
        'shafa_m': { name: 'Ø´ÙØ§ ØµØ¨Ø­', css: 'bg-shafa', instructor: 'Ø®Ø§Ù†Ù… Ø³Ø§Ù„Ø§Ø±ÛŒ' },
        'shafa_e': { name: 'Ø´ÙØ§ Ø¹ØµØ±', css: 'bg-shafa', instructor: 'Ø¢Ù‚Ø§ÛŒ Ø¯Ù‡Ù‚Ø§Ù†ÛŒ' },
    };

    const rotationLogic = [
        { label: "Ø±ÙˆØªÛŒØ´Ù† Û±", map: { 1: 'afzali_e', 6: 'afzali_m', 5: 'bahonar_e', 4: 'bahonar_m', 3: 'shafa_e', 2: 'shafa_m' } },
        { label: "Ø±ÙˆØªÛŒØ´Ù† Û²", map: { 2: 'afzali_e', 1: 'afzali_m', 6: 'bahonar_e', 5: 'bahonar_m', 4: 'shafa_e', 3: 'shafa_m' } },
        { label: "Ø±ÙˆØªÛŒØ´Ù† Û³", map: { 3: 'afzali_e', 2: 'afzali_m', 1: 'bahonar_e', 6: 'bahonar_m', 5: 'shafa_e', 4: 'shafa_m' } },
        { label: "Ø±ÙˆØªÛŒØ´Ù† Û´", map: { 4: 'afzali_e', 3: 'afzali_m', 2: 'bahonar_e', 1: 'bahonar_m', 6: 'shafa_e', 5: 'shafa_m' } },
        { label: "Ø±ÙˆØªÛŒØ´Ù† Ûµ", map: { 5: 'afzali_e', 4: 'afzali_m', 3: 'bahonar_e', 2: 'bahonar_m', 1: 'shafa_e', 6: 'shafa_m' } },
        { label: "Ø±ÙˆØªÛŒØ´Ù† Û¶", map: { 6: 'afzali_e', 5: 'afzali_m', 4: 'bahonar_e', 3: 'bahonar_m', 2: 'shafa_e', 1: 'shafa_m' } }
    ];

    const scheduleDates = [
        { range: "Û±Û¶ ØªØ§ Û²Û³ ÙØ±ÙˆØ±Ø¯ÛŒÙ† Û±Û´Û°Ûµ", rotIndex: 0, days: [{ d: "ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û±Û¶ ÙØ±ÙˆØ±Ø¯ÛŒÙ†" }, { d: "ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û²Û³ ÙØ±ÙˆØ±Ø¯ÛŒÙ†" }] },
        { range: "Û³Û° ÙØ±ÙˆØ±Ø¯ÛŒÙ† ØªØ§ Û¶ Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª Û±Û´Û°Ûµ", rotIndex: 1, days: [{ d: "ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û³Û° ÙØ±ÙˆØ±Ø¯ÛŒÙ†" }, { d: "ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û¶ Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª" }] },
        { range: "Û±Û³ ØªØ§ Û²Û° Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª Û±Û´Û°Ûµ", rotIndex: 2, days: [{ d: "ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û±Û³ Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª" }, { d: "ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û²Û° Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª" }] },
        { range: "Û²Û· Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª ØªØ§ Û³ Ø®Ø±Ø¯Ø§Ø¯ Û±Û´Û°Ûµ", rotIndex: 3, days: [{ d: "ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û²Û· Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª" }, { d: "ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û³ Ø®Ø±Ø¯Ø§Ø¯" }] },
        { range: "Û±Û° ØªØ§ Û±Û· Ø®Ø±Ø¯Ø§Ø¯ Û±Û´Û°Ûµ", rotIndex: 4, days: [{ d: "ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û±Û° Ø®Ø±Ø¯Ø§Ø¯" }, { d: "ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û±Û· Ø®Ø±Ø¯Ø§Ø¯" }] },
        { range: "Û²Û´ Ø®Ø±Ø¯Ø§Ø¯ ØªØ§ Û· ØªÛŒØ± Û±Û´Û°Ûµ", rotIndex: 5, days: [{ d: "ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û²Û´ Ø®Ø±Ø¯Ø§Ø¯" }, { d: "ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û³Û± Ø®Ø±Ø¯Ø§Ø¯" }, { d: "ÛŒÚ©Ø´Ù†Ø¨Ù‡ Û· ØªÛŒØ±" }] }
    ];

    function renderSchedule() {
        const selectedGroup = document.getElementById('groupSelect').value;
        const container = document.getElementById('scheduleContainer');
        container.innerHTML = '';

        scheduleDates.forEach(block => {
            const card = document.createElement('div');
            card.className = 'card';
            
            const currentRotationMap = rotationLogic[block.rotIndex].map;
            let tableHeader = '';
            
            if (selectedGroup === 'all') {
                tableHeader = `
                    <th style="min-width:40px">Ú¯ Û±</th>
                    <th style="min-width:40px">Ú¯ Û²</th>
                    <th style="min-width:40px">Ú¯ Û³</th>
                    <th style="min-width:40px">Ú¯ Û´</th>
                    <th style="min-width:40px">Ú¯ Ûµ</th>
                    <th style="min-width:40px">Ú¯ Û¶</th>
                `;
            } else {
                tableHeader = `<th>Ù…Ø­Ù„ Ú©Ø§Ø±Ø¢Ù…ÙˆØ²ÛŒ Ú¯Ø±ÙˆÙ‡ ${selectedGroup}</th>`;
            }

            let tableRows = '';
            
            block.days.forEach(day => {
                let rowContent = '';
                
                if (selectedGroup === 'all') {
                    for (let g = 1; g <= 6; g++) {
                        const stationKey = currentRotationMap[g];
                        const station = stations[stationKey];
                        if (station) {
                            rowContent += `<td><span class="station-cell ${station.css}">${station.name}</span></td>`;
                        } else {
                            rowContent += `<td><span class="station-cell bg-off">-</span></td>`;
                        }
                    }
                } else {
                    const stationKey = currentRotationMap[selectedGroup];
                    const myStation = stations[stationKey];
                    if (myStation) {
                        rowContent += `
                            <td>
                                <span class="station-cell ${myStation.css}" style="font-size:0.9rem; padding:8px;">
                                    ${myStation.name}
                                    <span class="instructor-name">${myStation.instructor}</span>
                                </span>
                            </td>`;
                    } else {
                        rowContent += `<td><span class="station-cell bg-off">Ø¢Ù</span></td>`;
                    }
                }

                tableRows += `
                    <tr>
                        <td style="font-weight:bold;">${day.d}</td>
                        ${rowContent}
                    </tr>
                `;
            });

            card.innerHTML = `
                <div class="card-header">
                    <span>${block.range}</span>
                </div>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Ø±ÙˆØ²</th>
                                ${tableHeader}
                            </tr>
                        </thead>
                        <tbody>
                            ${tableRows}
                        </tbody>
                    </table>
                </div>
            `;
            container.appendChild(card);
        });
    }

    // --- Ø¨Ø®Ø´ Ø§Ø³Ø§Ù…ÛŒ ---
    
    const hardcodedGroups = [
        { id: 1, label: 'Ú¯Ø±ÙˆÙ‡ Û±', members: ['Ù…Ù‡Ø±Ù†Ø§Ø² Ú¯Ø±Ø¬ÛŒ', 'Ø³Ø­Ø± Ø±Ù†Ø¬Ø¨Ø±', 'Ù‡Ø§Ù†ÛŒÙ‡ Ø²Ø±ÛŒÙ†', 'Ø·Ø§Ù‡Ø±Ù‡ Ú©Ø´Ø§ÙˆØ±Ø²'] },
        { id: 2, label: 'Ú¯Ø±ÙˆÙ‡ Û²', members: ['Ù‡Ù„ÛŒØ§ Ø³Ø§Ø¯Ø§Øª Ø§Ù…ÛŒØ±ÛŒ', 'Ø²ÛŒÙ†Ø¨ Ø¹Ø³Ú©Ø±ÛŒ', 'ØµØ¯ÛŒÙ‚Ù‡ ÙÙ„Ø§Ø­', 'Ø¢ÛŒØ³Ø§ Ø§ÛŒØ±Ø§Ù†Ù…Ù†Ø´'] },
        { id: 3, label: 'Ú¯Ø±ÙˆÙ‡ Û³', members: ['Ø¨Ù‡Ø¯Ø§Ø¯ ØºÙØ§Ø±ÛŒ', 'Ø§Ù…ÛŒØ±Ø­Ø³ÛŒÙ† Ù¾ÙˆØ± Ø±Ø´ÛŒØ¯ÛŒ', 'Ø¢Ø±Ø´ Ø±ÙˆØ­Ø§Ù†ÛŒ', ''] },
        { id: 4, label: 'Ú¯Ø±ÙˆÙ‡ Û´', members: ['Ù†Ø¯Ø§ Ø²Ø§Ø±Ø¹ÛŒ', 'Ú©ÛŒÙ…ÛŒØ§ Ù…ÙˆØ­Ø¯ÛŒ', 'Ø¹Ø³Ù„ ÙØªØ§Ø­ÛŒ', ''] },
        { id: 5, label: 'Ú¯Ø±ÙˆÙ‡ Ûµ', members: ['Ù…Ù‡Ø´ÛŒØ¯ Ø²ÛŒÙ† Ø§Ù„Ø¯ÛŒÙ†ÛŒ', 'Ø±ÛŒØ­Ø§Ù†Ù‡ Ù‚Ø§Ø³Ù…ÛŒ', 'ÙØ§Ø·Ù…Ù‡ Ø¬Ù…Ø´ÛŒØ¯ÛŒ', 'Ø§Ø±Ø¯Ù„Ø§Ù† Ù†Ù‚ÛŒ Ø²Ø§Ø¯Ù‡'] },
        { id: 6, label: 'Ú¯Ø±ÙˆÙ‡ Û¶', members: ['Ù…Ø­Ù…Ø¯ Ù…Ù‡Ø¯ÛŒ Ø§Ø±Ø¬Ù…Ù†Ø¯', 'Ø¹Ø¨Ø§Ø³ Ø®Ø§Ø¯Ù…ÛŒ', 'Ø¹Ù„ÛŒ Ø¯Ù‡Ù‚Ø§Ù†', 'Ø§Ù…ÛŒØ± ÙØ§Ø¶Ù„ ØºÙ†ÛŒ'] },
    ];

    const STORAGE_KEY = 'radiology_internship2_final_v1';
    let studentGroups = JSON.parse(localStorage.getItem(STORAGE_KEY)) || hardcodedGroups;

    function renderNamesTable() {
        const container = document.getElementById('namesTableContainer');
        let html = `<table><thead><tr><th style="width:30px">Ø±Ø¯ÛŒÙ</th>`;
        
        studentGroups.forEach(g => {
            html += `<th style="min-width:110px">${g.label}</th>`;
        });
        html += `</tr></thead><tbody>`;

        [0, 1, 2, 3].forEach(idx => {
            html += `<tr><td>${idx + 1}</td>`;
            studentGroups.forEach(g => {
                const val = g.members[idx] || '';
                html += `<td class="input-group">
                    <input type="text" 
                           value="${val}" 
                           oninput="updateMember(${g.id}, ${idx}, this.value)" 
                           placeholder="...">
                </td>`;
            });
            html += `</tr>`;
        });
        
        html += `</tbody></table>`;
        container.innerHTML = html;
    }

    window.updateMember = function(groupId, memberIndex, value) {
        const group = studentGroups.find(g => g.id === groupId);
        if (group) {
            group.members[memberIndex] = value;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(studentGroups));
        }
    };

    renderSchedule();
    renderNamesTable();

</script>

</body>
</html>
